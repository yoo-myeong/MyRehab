# MyRehab

## 👉 목적

웹과 자체 개발 보조도구를 사용해 자가 재활 운동의 어려움을 해결하여 부족한 재활 시설 인프라 환경에 기여

<br>

## 🔎 프로젝트 개요

 우리 팀은 자가 재활치료를 보조하고 꾸준한 상지 재활을 도와줄 **MyRehab(마이리햅)** 을 제작했다. MyRehab은 [스마트 운동매트]()와 [컨트롤러]() 그리고 이들과 연동되는 [웹]()으로 구성되어 있다. 
 
**스마트 운동매트**는 재활치료 동작 수행을 도와주기 위해 LED를 점등하여 다음 스텝을 안내하고, 각 지점에 부착된 압력센서로 사용자의 균형을 측정하여 자세를 교정한다.
 
**컨트롤러**는 MPU6050을 부착해 roll, pitch, yaw를 측정해서 자세 교정과 손목 재활 게임에 활용하며 사용자가 버튼을 누르는 힘을 압력센서로 측정해서 손가락 재활 게임에 사용한다.
 
**웹**은 재활치료 동작을 머신러닝한 모델을 Javascript로 불러온 뒤, 웹캠으로 입력되는 사용자의 자세를 분석해서 자세의 정확성을 판단한다. 그래프와 캘린더를 활용한 스케줄링이 가능하며 지루해하기 쉽고 가볍게 여길 수 있는 상지 재활치료를 꾸준히 수행하도록 유도하기 위해서 컨트롤러를 활용한 재활 게임을 제공한다. 마지막으로 커뮤니티를 통해 사용자 간 재활에 관한 정보공유가 가능하다.
 
<br>

## 📈 개발 목표
 
**1. 올바른 요법으로 시행**<br>
올바르지 못한 방법과 동작으로 재활치료를 진행하면 높은 효과를 얻지 못할 뿐만 아니라 또 다른 부상을 초래할 가능성을 유발한다. 이를 방지하기 위해 스마트 운동매트의 **FSR402**와 스트레칭 밴드의 **MPU6050**을 통해 균형을 바로 잡고 웹캠을 통해 학습된 모델을 기반으로 사용자의 자세를 분석하고 교정을 한다. 

**2. 점진적 과부하**<br>
재활치료는 근육과 관절의 감각을 강화하기 위해 운동 강도와 범위를 점진적으로 증가시킨다. 웹앱은 사용자가 수행한 기록을 기반으로 스케줄을 관리하고 이에 따라 스트레칭 밴드의 장력을 조절하고 운동 범위를 넓혀 감각 강화를 유도한다.

**3. 꾸준한 관리**<br>
전문가들은 '재활치료의 성패는 꾸준함이라고 해도 과언이 아니다'라는 얘기를 한다. 중추신경계 손상 치료 후 재활치료를 가지는 경우 최대 1년까지 회복 시기로 보기 때문에 그동안 반복적인 재활치료를 꾸준히 이어나갈 수 있어야 한다. MyRehab은 간단한 재활 운동과 함께 진행할 수 있는 게임을 웹앱을 통해 제공하여 지루할 수 있는 재활치료에 재미와 흥미가 가질 수 있도록 도와줄 것이다.

<br>

## 📁 진행과정
### 💻 웹
+ **index.html**

     사이트에 접속하면 가장 먼저 보는 페이지로 MyRehab에 대한 설명과 이용가이드의 설명을 포함한다.

     홈버튼과 메뉴 글씨를 변경하기 위해 [눈누](https://noonnu.cc/)에서 폰트를 받아 사용했다.

     >index.html에 main.css를 불러오고 폰트를 css에 추가했지만 적용이 되지 않았다. 부트스트랩에 설정된 css가 nav-bar에 우선순위가 높아서 적용이 안되었다고 생각해서 index.html의 head 태그에 직접 폰트를 불러와서 적용하려는 a태그에 인라인으로 작성했더니 잘 적용이 되었다.

+ **RehabSelect.html**

    재활치료를 진행 할 부위를 선택하고 난이도를 선택하여 그에 맞는 페이지로 이동하기 위한 선택 기능을 제공한다.

    첫번째 select 박스에서 옵션을 선택하면 두번째 박스가 보이고, 두번째 박스에서 난이도 옵션을 선택하면 최종적으로 시작할 수 있는 버튼이 나온다.

    > JS를 통해 직접 구현을 했다. 처음에 **addEventListner**를 사용하여 select태그에 선택이 일어나면 **style.display** 속성을 바꾸는 함수가 동작되도록 했는데 함수는 정상 작동하는 것을 확인했는데 이벤트가 발생해도 display속성이 바뀌지 않았다. addEventListner의 select라는 옵션이 option태그가 선택될 때 동작되는 것이어서 정상작동이 안된다고 판단했고, select태그에 인라인으로 **onchange**을 작성하여 직접 함수를 동작시키도록 해서 문제를 해결하였다.

+ **Django 프로젝트 생성**

    ```python manage.py migration```을 통하여 기본 기능에 사용될 템플릿을 만들고 rehab앱을 생성하여 **rehab model**을 추가해줬다. **templates**를 생성하여 경로를 설정하고 만들어높은 html파일을 이동시켰다. **MVC패턴**으로 시스템 구조를 디자인하기 위해서 **views.py**와 **urls.py**을 기본 셋팅했다. 

    > nav-bar와 ```<head>```에서 가져오는 **정적파일**, **폰트** 등은 공통적으로 사용되기 때문에 코드를 더 클린하게 구성하기 위하여 **base.html**을 생성하여 **템플릿 상속**을 시켰다. 그런데 정적 파일을 관리하기 위한 static이 연결되지 않았다. base.html에 ```{% load static %}```을 했지만 이는 파생되는 템플릿에 까지 영향을 주는 것이 아니기 때문에 정적파일을 사용하는 html 파일에도 따로 load static을 해주어야 했다.

